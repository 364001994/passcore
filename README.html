<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PassCore: A self-service password change utility for Active Directory | Unosquare SWAN ASPNetCore </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PassCore: A self-service password change utility for Active Directory | Unosquare SWAN ASPNetCore ">
    <meta name="generator" content="docfx 2.47.0.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="logo" src="best-practices/resources/images/unosquare_logo.svg" alt="Unosquare">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar">
          <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container-fluid body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p><a href="https://ci.appveyor.com/project/geoperez/passcore/branch/master"><img src="https://ci.appveyor.com/api/projects/status/76nxqw893mk7xfb9/branch/master?svg=true" alt="Build status"></a>
<a href="https://github.com/unosquare/passcore/releases"><img src="https://img.shields.io/github/downloads/unosquare/passcore/total.svg" alt="Github All Releases"></a>
<a href="https://github.com/igrigorik/ga-beacon"><img src="https://ga-beacon.appspot.com/UA-8535255-2/unosquare/passcore/" alt="Analytics"></a>
<img src="https://github.com/unosquare/passcore/workflows/ASP.NET%20Core%20CI/badge.svg" alt="Buils status"></p>
<p><img src="https://github.com/unosquare/passcore/raw/master/src/Unosquare.PassCore.Web/ClientApp/assets/images/passcore-logo.png" alt="Passcore Logo"></p>
<h1 id="passcore-a-self-service-password-change-utility-for-active-directory">PassCore: A self-service password change utility for Active Directory</h1>
<p><em><span class="emoji" shortcode="star">⭐</span> Please star this project if you find it useful!</em></p>
<ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#features">Features</a></li>
</ul>
</li>
<li><a href="#installation-on-iis">Installation on IIS</a></li>
<li><a href="#powershell-installer">PowerShell Installer</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#ldap-provider">LDAP Provider</a></li>
<li><a href="#customization-and-configuration">Customization and Configuration</a><ul>
<li><a href="#running-as-a-sub-application">Running as a sub application</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a><ul>
<li><a href="#ldap-support">LDAP Support</a></li>
</ul>
</li>
<li><a href="#build-your-own-version">Build your own version</a></li>
<li><a href="#create-your-own-provider">Create your own provider</a></li>
<li><a href="#license">License</a></li>
<li><a href="#passcorepro">passcorepro</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>PassCore is a very simple 1-page web application written in <a href="https://docs.microsoft.com/en-us/dotnet/csharp/">C#</a>, using <a href="https://docs.microsoft.com/en-us/aspnet/core/getting-started?view=aspnetcore-2.0">ASP.NET Core</a>, <a href="https://material-ui.com/">Material UI (React Components)</a>, and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices">Microsoft Directory Services</a> (Default provider). </p>
<p>It allows users to change their Active Directory/LDAP password on their own, provided the user is not disabled.</p>
<p>PassCore does not require any configuration, as it obtains the principal context from the current domain. I wrote this because a number of people have requested several features that the <a href="http://unopasscore.codeplex.com/">original version</a> did not have. The original version of this tool was downloaded around 8000 times in 2.5 years. My hope is that the new version continues to be just as popular. There really is no free alternative out there (that I know of) so hopefully this saves someone else some time and money.</p>
<h3 id="features">Features</h3>
<p>PassCore has the following features:</p>
<ul>
<li>Easily localizable (i.e. you can customize all of the strings in the UI -- see the section on Customization)</li>
<li>Supports <a href="https://www.google.com/recaptcha/intro/index.html">reCAPTCHA</a></li>
<li>Has a built-in password meter</li>
<li>Has a password generator</li>
<li><p>Has a server-side password entropy meter</p>
</li>
<li><p>Responsive design that works on mobiles, tablets, and desktops.</p>
</li>
<li>Works with Windows/Linux servers.</li>
</ul>
<p><img align="center" src="https://user-images.githubusercontent.com/25519413/63782596-39713d80-c8b1-11e9-84f0-eef7a06b447b.png"></p>
<h2 id="installation-on-iis">Installation on IIS</h2>
<p><em>You can easily install using Powershell. Check the next section to know how.</em></p>
<ol>
<li>Ensure the server running IIS is domain-joined. To determine if the computer is domain-joined:<ul>
<li>Go to the <em>Start</em> menu, right-click on <em>Computer</em>, then select <em>Properties</em></li>
<li>Make sure the <em>Domain</em> field contains the correct setting.</li>
</ul>
</li>
<li>You need a Passcore copy to continue. We recommend to download the latest binary release of <a href="https://github.com/unosquare/passcore/releases/download/4.2.0/PassCore420.zip">PassCore</a>.</li>
<li><strong>NOTE:</strong> Before extracting the contents of the file, please right-click on it, select Properties and make sure the file is Unblocked (Click on the Unblock button at the bottom of the dialog if it is available). Then, extract the contents of the zip file to the directory where you will be serving the website from.<ul>
<li>If you download the source code you need to run the following command via an Command Prompt. Make sure you start the Command Prompt with the Administrator option.</li>
<li><code>dotnet publish --configuration Release --runtime win-x64 --output &quot;&lt;path&gt;&quot;</code></li>
<li>The <code>&lt;path&gt;</code> is the directory where you will be serving the website from.</li>
</ul>
</li>
<li>Install the <a href="https://dotnet.microsoft.com/download/thank-you/dotnet-runtime-3.0.0-windows-hosting-bundle-installer">.NET Core 3.0.0 Windows Server Hosting bundle</a>.</li>
<li>Go to your <em>IIS Manager</em>, Right-click on <em>Application Pools</em> and select <em>Add Application Pool</em>.</li>
<li>A dialog appears. Under Name enter <strong>PassCore Application Pool</strong>, Under .NET CLR Version select <strong>No Managed Code</strong> and finally, under Managed pipeline mode select <strong>Integrated</strong>. Click OK after all fields have been set.</li>
<li>Now, right-click on the application pool you just created in the previous step and select <em>Advanced Settings ...</em>. Change the <em>Start Mode</em> to <strong>AlwaysRunning</strong>, and the <em>Idle Time-out (minutes)</em> to <strong>0</strong>. Click on <em>OK</em>. This will ensure PassCore stays responsive even after long periods of inactivity.</li>
<li>Back on your <em>IIS Manager</em>, right-click on <em>Sites</em> and select <em>Add Website</em></li>
<li>A dialog appears. Under <em>Site name</em>, enter <strong>PassCore Website</strong>. Under <em>Application pool</em> click on <em>Select</em> and ensure you select <strong>PassCore Application Pool</strong>. Under <em>Physical path</em>, click on the ellipsis <em>(...)</em>, navigate to the folder where you extracted PassCore.<ul>
<li><strong>Important:</strong> Make sure the Physical path points to the <em>parent</em> folder which is the one containing the files, <em>logs</em> and <em>wwwroot</em> folders.</li>
<li><strong>NOTE:</strong> If the folder <code>logs</code> is not there you can created. To enable the logs you need to change <code>stdoutLogEnabled</code> to <code>true</code> in the <code>web.config</code> file. You need to add <em>Full Control</em> permissions to your IIS Application Pool account (see Troubleshooting).</li>
</ul>
</li>
<li>Under the <em>Binding section</em> of the same dialog, configure the <em>Type</em> to be <strong>https</strong>, set <em>IP Address</em> to <strong>All Unassigned</strong>, the <em>Port</em> to <strong>443</strong> and the <em>Hostname</em> to something like <strong>password.yourdomain.com</strong>. Under <em>SSL Certificate</em> select a certificate that matches the Hostname you provided above. If you don&#39;t know how to install a certificate, please refer to <a href="https://www.digicert.com/ssl-certificate-installation-microsoft-iis-8.htm">SSL Certificate Install on IIS 8</a> or <a href="https://www.digicert.com/csr-creation-ssl-installation-iis-10.htm">SSL Certificate Install on IIS 10</a> , in order to install a proper certificate.<ul>
<li><strong>Important:</strong> Do not serve this website without an SSL certificate because requests and responses will be transmitted in cleartext and an attacker could easily retrieve these messages and collect usernames and passwords.</li>
</ul>
</li>
<li>Click <em>OK</em> and navigate to <code>https://password.yourdomain.com</code> (the hostname you previously set). If all is set then you should be able to see the PassCore tool show up in your browser.</li>
</ol>
<p><strong>NOTE:</strong> If you have a previous version, you <strong>can not</strong> use the same <code>appsettings.json</code> file. Please update your settings manually editing the new file.</p>
<h2 id="powershell-installer">PowerShell Installer</h2>
<p>Use PowerShell to download and setup Passcore using the following command line, just make sure you have installed the <a href="https://dotnet.microsoft.com/download/thank-you/dotnet-runtime-3.0.0-windows-hosting-bundle-installer">.NET Core 3.0.0 Windows Server Hosting bundle</a> 
and enabled World Wide Web publishing service:</p>
<pre><code class="lang-powershell">Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://raw.githubusercontent.com/unosquare/passcore/master/Installer.ps1&#39;))
</code></pre><p>Using the command shown above will install to the folder <code>C:\passcore</code> and using the HTTP Port 8080 with the default (localhost) binding. </p>
<p>If you want to customize your installation please download the <a href="https://raw.githubusercontent.com/unosquare/passcore/master/Installer.ps1">installer script</a> and 
the <a href="https://raw.githubusercontent.com/unosquare/passcore/master/IISSetup.ps1">IIS setup script</a>.</p>
<p><strong>NOTE:</strong> You need <a href="https://docs.microsoft.com/en-us/powershell/scripting/setup/windows-powershell-system-requirements?view=powershell-6">PowerShell version 5 or better</a> 
to execute the script.</p>
<h2 id="docker">Docker</h2>
<p>You can use the Alpine Docker Builder image and then copy the assets over to an Alpine container. You can pass environment attributes directly into docker without modifying the appsettings.json</p>
<pre><code>docker build --rm -t passcore .
docker run \
-e AppSettings__LdapHostnames__0=&#39;ad001.example.com&#39; \
-e AppSettings__LdapHostnames__1=&#39;ad002.example.com&#39; \
-e AppSettings__LdapPort=&#39;636&#39; \
-e AppSettings__LdapUsername=&#39;CN=First Last,OU=Users,DC=example,DC=com&#39; \
-it \
-p 80:80 \
passcore:latest
</code></pre><p><strong>NOTE:</strong> Docker image contains a build using the LDAP Provider (see below).</p>
<h2 id="ldap-provider">LDAP Provider</h2>
<p>PassCore was created to use the Microsoft Active Directory Services provided by .NET Framework, but a new Provider using <a href="https://github.com/dsbenghe/Novell.Directory.Ldap.NETStandard">Novell LDAP Client</a> can be used instead. This provider is the default when PassCore is running at Linux or macOS since Microsoft AD Services are NOT available.</p>
<p>The configuration of the LDAP Provider is slightly different. for example, the AutomaticContext is not available and you need to supply credentials.</p>
<p><em>WIP</em></p>
<h2 id="customization-and-configuration">Customization and Configuration</h2>
<p>All server-side settings and client-side settings are stored in the <code>/appsettings.json</code> file.
The most relevant configuration entries are shown below. Make sure you make your changes to the <code>appsettings.json</code> file using a regular text editor like <a href="https://code.visualstudio.com">Visual Studio Code</a></p>
<ul>
<li>To enable reCAPTCHA<ol>
<li>Find the <code>PrivateKey</code> entry and enter your private key within double quotes (<code>&quot;</code>)</li>
<li>Find the <code>SiteKey</code> entry and enter your Site Key within double quotes (<code>&quot;</code>)</li>
</ol>
</li>
<li>To change the language of the reCAPTCHA widget<ul>
<li>Find the <code>LanguageCode</code> entry and enter <a href="https://developers.google.com/recaptcha/docs/language">one of the options listed here</a>. By default this is set to <code>en</code></li>
</ul>
</li>
<li>To enable/disable the password meter<ul>
<li>Find the <code>ShowPasswordMeter</code> entry and set it to <code>true</code> or <code>false</code> (without quotes)</li>
</ul>
</li>
<li>To enable enable/disable the password generator<ul>
<li>Find the <code>UsePasswordGeneration</code> entry and set it to <code>true</code> or <code>false</code> (without quotes)</li>
<li>Find the <code>PasswordEntropy</code> entry and set it to a numeric value (without quotes) to set the entropy of the generated password</li>
</ul>
</li>
<li>To enable server-side password entropy meter<ul>
<li>Find the <code>MinimumScore</code> entry and set it to a numeric value (without quotes) between 1 and 4, where 1 is a bit secure and 4 is the most secure. Set to 0, for deactivate the validation.</li>
</ul>
</li>
<li>To enable restricted group checking<ol>
<li>Find the <code>RestrictedADGroups</code> entry and add any groups that are sensitive.  Accounts in these groups (directly or inherited) will not be able to change their password.</li>
</ol>
</li>
<li>Find the <code>DefaultDomain</code> entry and set it to your default Active Directory domain. This should eliminate confusion about using e-mail domains / internal domain names. <strong>NOTE:</strong> if you are using a subdomain, and you have errors, please try using your top-level domain. </li>
<li>To provide an optional parameter to the URL to set the username text box automatically<ol>
<li><code>http://mypasscore.com/?userName=someusername</code></li>
<li>This helps the user in case they forgot their username and, also comes in handy when sending a link to the application or having it embedded into another application where the user is already signed in.</li>
</ol>
</li>
<li>To specify which (DC) attribute is used to search for the specific user.<ul>
<li>With the <code>IdTypeForUser</code> it is possible to select one of six Attributes that will be used to search for the specifiv user.</li>
<li>The possible values are:<ul>
<li><code>DistinguishedName</code> or <code>DN</code></li>
<li><code>GloballyUniqueIdentifier</code> or <code>GUID</code></li>
<li><code>Name</code></li>
<li><code>SamAccountName</code> or <code>SAM</code></li>
<li><code>SecurityIdentifier</code> or <code>SID</code></li>
<li><code>UserPrincipalName</code> or <code>UPN</code></li>
</ul>
</li>
</ul>
</li>
<li>The rest of the configuration entries are all pretty much all UI strings. Change them to localize, or to brand this utility, to meet your needs.</li>
</ul>
<h3 id="running-as-a-sub-application">Running as a sub-application</h3>
<p>To run as a sub-application you need to modify the <code>base href=&quot;/&quot;</code> value in the <code>wwwroot/index.html</code> file to be the base URL for PassCore. For example you might have PassCore setup at /PassCore so you would put</p>
<pre><code class="lang-html">&lt;base href=&quot;/PassCore/&quot; /&gt;
</code></pre><h2 id="troubleshooting">Troubleshooting</h2>
<ul>
<li>At first run if you find an error (e.g. <strong>HTTP Error 502.5</strong>) first ensure you have installed <a href="https://dotnet.microsoft.com/download/thank-you/dotnet-runtime-3.0.0-windows-hosting-bundle-installer">.NET Core 3.0.0 Windows Server Hosting bundle</a>, or better.</li>
<li>If you find an <a href="https://stackoverflow.com/questions/45415832/http-error-500-19-in-iis-10-and-visual-studio-2017">HTTP Error 500</a> you can try<ol>
<li>Press Win Key+R to Open Run Window</li>
<li>in the Run Window, enter &quot;OptionalFeatures.exe&quot;</li>
<li>in the features window, Click: &quot;Internet Information Services&quot;</li>
<li>Click: &quot;World Wide Web Services&quot;</li>
<li>Click: &quot;Application Development Features&quot;</li>
<li>Check the features.</li>
</ol>
</li>
<li>If you / your user&#39;s current password never seems to be accepted for reset; the affected person may need to use a domain-connected PC to log in and reset their password on it first. Updated group policy settings could be blocking user changes, until a local login is completed.</li>
<li>You can add permissions to your log folder using <a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/icacls">icacls</a>
<code>icacls &quot;&lt;logfolder&gt;/&quot; /grant &quot;IIS AppPool\&lt;passcoreAppPoolAccount&gt;:M&quot; /t</code></li>
<li>If you find <a href="http://blog.cionsystems.com/?p=907">Exception from HRESULT: 0x800708C5 .The password does not meet the password policy requirements</a> trying to change a password. Set &#39;Minimum password age&#39; to 0 at &#39;Default Domain Policy&#39;.</li>
</ul>
<h3 id="ldap-support">LDAP Support</h3>
<ul>
<li>If your users are having trouble changing passwords as in issues #8 or #9 : try configuring the section <code>PasswordChangeOptions</code> in the <code>/appsettings.json</code> file. Here are some guidelines:<ol>
<li>Ensure <code>UseAutomaticContext</code> is set to <code>false</code></li>
<li>Ensure <code>LdapUsername</code> is set to an AD user with enough permissions to reset user passwords</li>
<li>Ensure <code>LdapPassword</code> is set to the correct password for the admin user mentioned above</li>
<li>User @gadams65 suggests the following: Use the FQDN of your LDAP host. Enter the LDAP username without any other prefix or suffix such as <code>domain\\</code> or <code>@domain</code>. Only the username.</li>
</ol>
</li>
<li>You can also opt to use the Linux or macOS version of PassCore. This version includes a LDAP Provider based on Novell. The same provider can be used with Windows, you must build it by yourself.</li>
</ul>
<h2 id="build-your-own-version">Build your own version</h2>
<p>If you need to modify the source code (either backend or frontend). You may require to install <a href="https://dotnet.microsoft.com/download">.NET Core SDK</a> and <a href="https://nodejs.org/en/download/">Node.js</a>. Run the following command according to your target platform.</p>
<h3 id="windows">Windows</h3>
<pre><code>dotnet publish --configuration Release --runtime win-x64 --output &quot;&lt;path&gt;&quot;
</code></pre><h3 id="linux-portable">Linux (portable)</h3>
<pre><code>dotnet publish --configuration Release --runtime linux-x64 /p:PASSCORE_PROVIDER=LDAP --output &quot;&lt;path&gt;&quot;
</code></pre><h3 id="macos-os-x">MacOS (OS X)</h3>
<pre><code>dotnet publish --configuration Release --runtime osx-x64 /p:PASSCORE_PROVIDER=LDAP --output &quot;&lt;path&gt;&quot;
</code></pre><p><em>Note</em> - The <code>PASSCORE_PROVIDER</code> modifier will use the LDAP Provider instead of Active Directory Provider.</p>
<h2 id="create-your-own-provider">Create your own provider</h2>
<p>If you wish to create your own provider, you need use our interface and common classes. You can use the following nuget to install them:</p>
<p><a href="https://badge.fury.io/nu/Unosquare.PassCore.Common"><img src="https://badge.fury.io/nu/Unosquare.PassCore.Common.svg" alt="NuGet version"></a></p>
<pre><code>PM&gt; Install-Package Unosquare.PassCore.Common
</code></pre><h2 id="license">License</h2>
<p>PassCore is open source software and MIT licensed. Please star this project if you like it.</p>
<h2 id="passcorepro">passcorepro</h2>
<p>PassCore is free and will continue to be free forever.
However, you can access a complete, brand new version with new features and tools.</p>
<p>Introducing passcorepro.
This new, enhanced version of our self-service password manager comes with new features such as:</p>
<ul>
<li>Display and manage your Active Directory information with our user profile system.</li>
<li>Search for any staff member with the new Directory grid.</li>
<li>Forgot your password? We help you reset it via Email or SMS (via <a href="https://www.twilio.com/">Twillio</a>).</li>
<li>Administrate your AD using our new Dashboard tool.</li>
<li>Parlez-vous français? You can now add any language to PassCorePro!</li>
</ul>
<p>Go to our store: <a href="https://store.unosquare.com/PasscorePro">https://store.unosquare.com/PasscorePro</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="doc" align="center">
              <span class="small mobile-hide">
                <img id="logo" class="doc-logo" src="/src/Unosquare.PassCore.Web/ClientApp/assets/images/passcore-logo.png" alt="">
              </span>
            </div>
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li class="top-sep">
                    <a href="https://github.com/unosquare/passcore/blob/master/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2017-2019 <a href="https://www.unosquare.com">Unosquare</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-8535255-2', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
